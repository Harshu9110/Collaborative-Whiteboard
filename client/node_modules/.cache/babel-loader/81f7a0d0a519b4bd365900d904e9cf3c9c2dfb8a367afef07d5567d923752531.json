{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Harsh Srivastava\\\\OneDrive\\\\Desktop\\\\Whiteboard\\\\Whiteboard\\\\client\\\\src\\\\components\\\\Whiteboard.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport DrawingCanvas from \"./DrawingCanvas\";\nimport Toolbar from \"./Toolbar\";\nimport UserCursors from \"./UserCursors\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Whiteboard = ({\n  socket,\n  roomId,\n  isConnected,\n  onLeaveRoom\n}) => {\n  _s();\n  const [userCount, setUserCount] = useState(0);\n  const [cursors, setCursors] = useState({});\n  const [drawingSettings, setDrawingSettings] = useState({\n    color: \"#000000\",\n    strokeWidth: 3\n  });\n  useEffect(() => {\n    if (!socket) return;\n    socket.on(\"user-count\", count => {\n      setUserCount(count);\n    });\n    socket.on(\"cursor-update\", data => {\n      setCursors(prev => ({\n        ...prev,\n        [data.userId]: data\n      }));\n    });\n    return () => {\n      socket.off(\"user-count\");\n      socket.off(\"cursor-update\");\n    };\n  }, [socket]);\n  const handleClearCanvas = () => {\n    if (window.confirm(\"Are you sure you want to clear the canvas for everyone? This action cannot be undone.\")) {\n      const canvas = document.querySelector(\".drawing-canvas\");\n      if (canvas) {\n        const ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n      }\n      socket.emit(\"clear-canvas\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"whiteboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whiteboard-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Room: \", roomId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-count\",\n          children: [userCount, \" user\", userCount !== 1 ? \"s\" : \"\", \" online\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: \"1rem\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `connection-status ${isConnected ? \"connected\" : \"disconnected\"}`,\n          children: isConnected ? \"Connected\" : \"Disconnected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLeaveRoom,\n          style: {\n            padding: \"0.5rem 1rem\",\n            backgroundColor: \"#f44336\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"4px\",\n            cursor: \"pointer\"\n          },\n          children: \"Leave Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whiteboard-content\",\n      children: [/*#__PURE__*/_jsxDEV(Toolbar, {\n        drawingSettings: drawingSettings,\n        onSettingsChange: setDrawingSettings,\n        onClearCanvas: handleClearCanvas\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"canvas-container\",\n        children: [/*#__PURE__*/_jsxDEV(DrawingCanvas, {\n          socket: socket,\n          drawingSettings: drawingSettings,\n          onCursorMove: (x, y) => {\n            socket.emit(\"cursor-move\", {\n              x,\n              y\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(UserCursors, {\n          cursors: cursors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(Whiteboard, \"+tLuWAv8McZyQlYvToKjjVriVQU=\");\n_c = Whiteboard;\nexport default Whiteboard;\nvar _c;\n$RefreshReg$(_c, \"Whiteboard\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","DrawingCanvas","Toolbar","UserCursors","jsxDEV","_jsxDEV","Whiteboard","socket","roomId","isConnected","onLeaveRoom","userCount","setUserCount","cursors","setCursors","drawingSettings","setDrawingSettings","color","strokeWidth","on","count","data","prev","userId","off","handleClearCanvas","window","confirm","canvas","document","querySelector","ctx","getContext","clearRect","width","height","emit","className","children","fileName","lineNumber","columnNumber","style","display","gap","alignItems","onClick","padding","backgroundColor","border","borderRadius","cursor","onSettingsChange","onClearCanvas","onCursorMove","x","y","_c","$RefreshReg$"],"sources":["C:/Users/Harsh Srivastava/OneDrive/Desktop/Whiteboard/Whiteboard/client/src/components/Whiteboard.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport DrawingCanvas from \"./DrawingCanvas\"\nimport Toolbar from \"./Toolbar\"\nimport UserCursors from \"./UserCursors\"\n\nconst Whiteboard = ({ socket, roomId, isConnected, onLeaveRoom }) => {\n  const [userCount, setUserCount] = useState(0)\n  const [cursors, setCursors] = useState({})\n  const [drawingSettings, setDrawingSettings] = useState({\n    color: \"#000000\",\n    strokeWidth: 3,\n  })\n\n  useEffect(() => {\n    if (!socket) return\n\n    socket.on(\"user-count\", (count) => {\n      setUserCount(count)\n    })\n\n    socket.on(\"cursor-update\", (data) => {\n      setCursors((prev) => ({\n        ...prev,\n        [data.userId]: data,\n      }))\n    })\n\n    return () => {\n      socket.off(\"user-count\")\n      socket.off(\"cursor-update\")\n    }\n  }, [socket])\n\n  const handleClearCanvas = () => {\n    if (window.confirm(\"Are you sure you want to clear the canvas for everyone? This action cannot be undone.\")) {\n      const canvas = document.querySelector(\".drawing-canvas\")\n      if (canvas) {\n        const ctx = canvas.getContext(\"2d\")\n        ctx.clearRect(0, 0, canvas.width, canvas.height)\n      }\n      socket.emit(\"clear-canvas\")\n    }\n  }\n\n  return (\n    <div className=\"whiteboard\">\n      <div className=\"whiteboard-header\">\n        <div className=\"room-info\">\n          <h2>Room: {roomId}</h2>\n          <div className=\"user-count\">\n            {userCount} user{userCount !== 1 ? \"s\" : \"\"} online\n          </div>\n        </div>\n        <div style={{ display: \"flex\", gap: \"1rem\", alignItems: \"center\" }}>\n          <div className={`connection-status ${isConnected ? \"connected\" : \"disconnected\"}`}>\n            {isConnected ? \"Connected\" : \"Disconnected\"}\n          </div>\n          <button\n            onClick={onLeaveRoom}\n            style={{\n              padding: \"0.5rem 1rem\",\n              backgroundColor: \"#f44336\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"4px\",\n              cursor: \"pointer\",\n            }}\n          >\n            Leave Room\n          </button>\n        </div>\n      </div>\n\n      <div className=\"whiteboard-content\">\n        <Toolbar\n          drawingSettings={drawingSettings}\n          onSettingsChange={setDrawingSettings}\n          onClearCanvas={handleClearCanvas}\n        />\n\n        <div className=\"canvas-container\">\n          <DrawingCanvas\n            socket={socket}\n            drawingSettings={drawingSettings}\n            onCursorMove={(x, y) => {\n              socket.emit(\"cursor-move\", { x, y })\n            }}\n          />\n          <UserCursors cursors={cursors} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Whiteboard\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}